<div class="flex h-full flex-col overflow-hidden p-8">
    <!-- Header -->
    <div class="flex items-center justify-between mb-6">
        <div>
            <h1 class="text-3xl font-bold text-slate-900">MÃ¼ÅŸteriler</h1>
            <p class="text-slate-500">MÃ¼ÅŸteri listenizi yÃ¶netin ve yeni mÃ¼ÅŸteriler ekleyin.</p>
        </div>
        <button (click)="toggleAddForm()"
            class="inline-flex items-center gap-2 bg-primary text-white px-6 py-2.5 rounded-lg font-bold hover:bg-blue-700 transition-colors">
            <span class="material-symbols-outlined">{{ showAddForm ? 'close' : 'add' }}</span>
            {{ showAddForm ? 'Ä°ptal' : 'Yeni MÃ¼ÅŸteri Ekle' }}
        </button>
    </div>

    <!-- Add Customer Form -->
    <div *ngIf="showAddForm" class="mb-6 p-6 bg-white rounded-xl border border-slate-200 shadow-sm">
        <h2 class="text-lg font-bold text-slate-900 mb-4">Yeni MÃ¼ÅŸteri Ekle</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            <div>
                <label class="block text-sm font-medium text-slate-700 mb-1">MÃ¼ÅŸteri AdÄ± *</label>
                <input type="text" [(ngModel)]="newCustomer.name" placeholder="Åžirket veya kiÅŸi adÄ±"
                    class="w-full rounded-lg border-slate-300 text-sm focus:border-primary focus:ring-1 focus:ring-primary" />
            </div>
            <div>
                <label class="block text-sm font-medium text-slate-700 mb-1">E-Posta</label>
                <input type="email" [(ngModel)]="newCustomer.email" placeholder="ornek@sirket.com"
                    class="w-full rounded-lg border-slate-300 text-sm focus:border-primary focus:ring-1 focus:ring-primary" />
            </div>
            <div>
                <label class="block text-sm font-medium text-slate-700 mb-1">Telefon</label>
                <input type="tel" [(ngModel)]="newCustomer.phone" placeholder="+90 555 123 4567"
                    class="w-full rounded-lg border-slate-300 text-sm focus:border-primary focus:ring-1 focus:ring-primary" />
            </div>
            <div>
                <label class="block text-sm font-medium text-slate-700 mb-1">Vergi NumarasÄ±</label>
                <input type="text" [(ngModel)]="newCustomer.taxId" placeholder="1234567890"
                    class="w-full rounded-lg border-slate-300 text-sm focus:border-primary focus:ring-1 focus:ring-primary" />
            </div>
            <div>
                <label class="block text-sm font-medium text-slate-700 mb-1">Ãœlke</label>
                <select [(ngModel)]="newCustomer.country"
                    class="w-full rounded-lg border-slate-300 text-sm focus:border-primary focus:ring-1 focus:ring-primary">
                    <option value="TÃ¼rkiye">ðŸ‡¹ðŸ‡· TÃ¼rkiye</option>
                    <option value="Almanya">ðŸ‡©ðŸ‡ª Almanya</option>
                    <option value="Fransa">ðŸ‡«ðŸ‡· Fransa</option>
                    <option value="BirleÅŸik KrallÄ±k">ðŸ‡¬ðŸ‡§ BirleÅŸik KrallÄ±k</option>
                    <option value="ABD">ðŸ‡ºðŸ‡¸ ABD</option>
                    <option value="Ä°spanya">ðŸ‡ªðŸ‡¸ Ä°spanya</option>
                    <option value="Ä°talya">ðŸ‡®ðŸ‡¹ Ä°talya</option>
                    <option value="Hollanda">ðŸ‡³ðŸ‡± Hollanda</option>
                </select>
            </div>
            <div>
                <label class="block text-sm font-medium text-slate-700 mb-1">Adres</label>
                <input type="text" [(ngModel)]="newCustomer.address" placeholder="Tam adres"
                    class="w-full rounded-lg border-slate-300 text-sm focus:border-primary focus:ring-1 focus:ring-primary" />
            </div>
        </div>
        <div class="mt-4 flex justify-end gap-3">
            <button (click)="toggleAddForm()"
                class="px-4 py-2 text-slate-600 hover:text-slate-900 font-medium transition-colors">
                Ä°ptal
            </button>
            <button (click)="saveCustomer()" [disabled]="isSaving"
                class="inline-flex items-center gap-2 bg-primary text-white px-6 py-2 rounded-lg font-bold hover:bg-blue-700 transition-colors disabled:opacity-50">
                <span *ngIf="isSaving" class="material-symbols-outlined animate-spin text-lg">progress_activity</span>
                {{ isSaving ? 'Kaydediliyor...' : 'Kaydet' }}
            </button>
        </div>
    </div>

    <!-- Loading State -->
    <div *ngIf="isLoading" class="flex-1 flex items-center justify-center">
        <div class="text-center">
            <span class="material-symbols-outlined text-4xl text-primary animate-spin">progress_activity</span>
            <p class="mt-2 text-slate-500">MÃ¼ÅŸteriler yÃ¼kleniyor...</p>
        </div>
    </div>

    <!-- Content -->
    <ng-container *ngIf="!isLoading">
        <!-- Empty State -->
        <div *ngIf="(customers$ | async)?.length === 0 && !showAddForm" class="flex-1 flex items-center justify-center">
            <div class="text-center">
                <span class="material-symbols-outlined text-6xl text-slate-300">group</span>
                <h3 class="mt-4 text-lg font-semibold text-slate-900">HenÃ¼z mÃ¼ÅŸteri yok</h3>
                <p class="mt-2 text-slate-500">Ä°lk mÃ¼ÅŸterinizi eklemek iÃ§in butona tÄ±klayÄ±n.</p>
                <button (click)="toggleAddForm()"
                    class="mt-4 inline-flex items-center gap-2 bg-primary text-white px-6 py-2.5 rounded-lg font-bold hover:bg-blue-700 transition-colors">
                    <span class="material-symbols-outlined">add</span>
                    Yeni MÃ¼ÅŸteri Ekle
                </button>
            </div>
        </div>

        <!-- Table -->
        <div *ngIf="(customers$ | async)?.length" class="flex-1 overflow-auto rounded-lg border border-slate-200 bg-white shadow-sm">
            <table class="w-full min-w-[800px] text-left text-sm">
                <thead class="bg-slate-50 text-xs uppercase text-slate-500 sticky top-0">
                    <tr>
                        <th class="px-6 py-3 font-semibold">MÃ¼ÅŸteri AdÄ±</th>
                        <th class="px-6 py-3 font-semibold">E-Posta</th>
                        <th class="px-6 py-3 font-semibold">Telefon</th>
                        <th class="px-6 py-3 font-semibold">Vergi No</th>
                        <th class="px-6 py-3 font-semibold">Ãœlke</th>
                        <th class="px-6 py-3 font-semibold text-right">Ä°ÅŸlemler</th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-slate-200">
                    <tr *ngFor="let customer of customers$ | async" class="group hover:bg-slate-50">
                        <td class="px-6 py-4">
                            <div class="font-medium text-slate-900">{{ customer.name }}</div>
                            <div class="text-xs text-slate-500" *ngIf="customer.address">{{ customer.address }}</div>
                        </td>
                        <td class="px-6 py-4 text-slate-600">{{ customer.email || '-' }}</td>
                        <td class="px-6 py-4 text-slate-600">{{ customer.phone || '-' }}</td>
                        <td class="px-6 py-4 text-slate-600 font-mono text-xs">{{ customer.taxId || '-' }}</td>
                        <td class="px-6 py-4 text-slate-600">{{ customer.country }}</td>
                        <td class="px-6 py-4 text-right">
                            <div class="flex justify-end gap-2 opacity-0 transition-opacity group-hover:opacity-100">
                                <button class="p-1.5 text-slate-400 hover:text-primary hover:bg-primary/10 rounded-lg transition-colors" title="DÃ¼zenle">
                                    <span class="material-symbols-outlined text-[18px]">edit</span>
                                </button>
                                <button (click)="deleteCustomer(customer)" class="p-1.5 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors" title="Sil">
                                    <span class="material-symbols-outlined text-[18px]">delete</span>
                                </button>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </ng-container>
</div>