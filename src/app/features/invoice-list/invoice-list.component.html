<div class="flex h-full flex-col overflow-hidden p-8">
    <div class="flex items-center justify-between mb-6">
        <div>
            <h1 class="text-3xl font-bold text-slate-900">FaturalarÄ±m</h1>
            <p class="text-slate-500">KaydedilmiÅŸ faturalarÄ±nÄ±zÄ± yÃ¶netin ve dÃ¼zenleyin.</p>
        </div>
        <app-button variant="primary" icon="add" (click)="createNewInvoice()">Yeni Fatura OluÅŸtur</app-button>
    </div>

    <!-- Loading State -->
    <div *ngIf="isLoading" class="flex-1 flex items-center justify-center">
        <div class="text-center">
            <span class="material-symbols-outlined text-4xl text-primary animate-spin">progress_activity</span>
            <p class="mt-2 text-slate-500">Faturalar yÃ¼kleniyor...</p>
        </div>
    </div>

    <!-- Content -->
    <ng-container *ngIf="!isLoading">
        <!-- Empty State -->
        <div *ngIf="(invoices$ | async)?.length === 0" class="flex-1 flex items-center justify-center">
            <div class="text-center">
                <span class="material-symbols-outlined text-6xl text-slate-300">receipt_long</span>
                <h3 class="mt-4 text-lg font-semibold text-slate-900">HenÃ¼z fatura yok</h3>
                <p class="mt-2 text-slate-500">Ä°lk faturanÄ±zÄ± oluÅŸturmak iÃ§in butona tÄ±klayÄ±n.</p>
                <button (click)="createNewInvoice()"
                    class="mt-4 inline-flex items-center gap-2 bg-primary text-white px-6 py-2.5 rounded-lg font-bold hover:bg-blue-700 transition-colors">
                    <span class="material-symbols-outlined">add</span>
                    Yeni Fatura OluÅŸtur
                </button>
            </div>
        </div>

        <!-- Table -->
        <div *ngIf="(invoices$ | async)?.length" class="mt-6 flex-1 overflow-auto rounded-lg border border-slate-200 bg-white shadow-sm">
            <table class="w-full min-w-[800px] text-left text-sm">
                <thead class="bg-slate-50 text-xs uppercase text-slate-500 sticky top-0">
                    <tr>
                        <th class="px-6 py-3 font-semibold">Fatura No</th>
                        <th class="px-6 py-3 font-semibold">MÃ¼ÅŸteri</th>
                        <th class="px-6 py-3 font-semibold">Ãœlke</th>
                        <th class="px-6 py-3 font-semibold">Toplam</th>
                        <th class="px-6 py-3 font-semibold">Tarih</th>
                        <th class="px-6 py-3 font-semibold">Durum</th>
                        <th class="px-6 py-3"></th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-slate-200">
                    <tr *ngFor="let invoice of invoices$ | async" class="group hover:bg-slate-50">
                        <td class="px-6 py-4 font-mono text-sm text-slate-600">{{ invoice.number }}</td>
                        <td class="px-6 py-4">
                            <div class="font-medium text-slate-900">{{ invoice.customerName }}</div>
                            <div class="text-xs text-slate-500" *ngIf="invoice.customerTaxId">{{ invoice.customerTaxId }}</div>
                        </td>
                        <td class="px-6 py-4">
                            <span class="inline-flex items-center gap-1.5">
                                <span class="text-lg">{{ invoice.countryCode === 'TR' ? 'ğŸ‡¹ğŸ‡·' : invoice.countryCode === 'DE' ? 'ğŸ‡©ğŸ‡ª' : invoice.countryCode === 'FR' ? 'ğŸ‡«ğŸ‡·' : invoice.countryCode === 'GB' ? 'ğŸ‡¬ğŸ‡§' : invoice.countryCode === 'US' ? 'ğŸ‡ºğŸ‡¸' : 'ğŸŒ' }}</span>
                                <span class="text-xs text-slate-500">{{ invoice.currencyCode }}</span>
                            </span>
                        </td>
                        <td class="px-6 py-4 font-semibold text-slate-900">
                            {{ invoice.currencySymbol }}{{ invoice.total | number:'1.2-2' }}
                        </td>
                        <td class="px-6 py-4 text-slate-500">{{ invoice.date }}</td>
                        <td class="px-6 py-4">
                            <span [class]="'rounded-full px-2.5 py-0.5 text-xs font-bold ' + getStatusColor(invoice.status)">
                                {{ getStatusText(invoice.status) }}
                            </span>
                        </td>
                        <td class="px-6 py-4 text-right">
                            <div class="flex justify-end gap-2 opacity-0 transition-opacity group-hover:opacity-100">
                                <button class="p-1.5 text-slate-400 hover:text-primary hover:bg-primary/10 rounded-lg transition-colors" title="GÃ¶rÃ¼ntÃ¼le">
                                    <span class="material-symbols-outlined text-[18px]">visibility</span>
                                </button>
                                <button (click)="deleteInvoice(invoice)" class="p-1.5 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors" title="Sil">
                                    <span class="material-symbols-outlined text-[18px]">delete</span>
                                </button>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </ng-container>
</div>